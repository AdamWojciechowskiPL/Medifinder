<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Medifinder Web</title>
    <!-- U偶ycie cie偶ki bezwzgldnej (zaczynajcej si od /) zapobiega bdom przy adowaniu z podstron -->
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Medicover Appointment Finder Web</h1>
            <div class="header-right">
                 <span id="userLabel"></span>
                 <button id="authBtn" class="btn btn-sm" onclick="loginWithGoogle()">Logowanie</button>
            </div>
        </header>

        <!-- Login Overlay -->
        <div id="loginOverlay" class="login-overlay">
            <div class="login-box">
                <h2>Wymagane Logowanie</h2>
                <button class="btn btn-primary" onclick="loginWithGoogle()">Zaloguj przez Google</button>
            </div>
        </div>

        <!-- Main Content -->
        <div id="appContent" class="hidden">
            
            <!-- Sekcja 1: Zarzdzanie profilem -->
            <div class="panel">
                <div class="panel-row">
                    <label><strong>[+] Zarzdzanie Profilem:</strong> <span id="currentProfileLabel">Brak</span></label>
                    <button class="btn btn-sm btn-link" onclick="toggleProfilesModal()">Zmie</button>
                </div>
                
                <div class="panel-row">
                    <label><strong>[-] Automatyczne sprawdzanie:</strong> <span id="autoCheckStatus">Wyczone</span></label>
                </div>
                <div class="panel-row indent">
                    <input type="checkbox" id="enableAutoCheck">
                    <label for="enableAutoCheck">Wcz automatyczne sprawdzanie co</label>
                    <input type="number" id="checkInterval" value="1" min="1" style="width: 50px;">
                    <label>minut</label>
                </div>

                <div class="panel-row">
                    <label><strong>[-] Automatyczna Rezerwacja:</strong> <span id="autoBookStatus">Wyczona</span></label>
                </div>
                <div class="panel-row indent">
                    <input type="checkbox" id="autoBook">
                    <label for="autoBook">Wcz automatyczne rezerwowanie pierwszej znalezionej wizyty</label>
                </div>

                <!-- Dni tygodnia i godziny -->
                <div class="panel-row" style="margin-top: 10px;">
                    <label>Dni tygodnia:</label>
                    <div class="weekdays-selector" id="weekdaysContainer">
                        <!-- Generowane przez JS -->
                    </div>
                </div>
                <div class="panel-row">
                    <label>Przedzia godzinowy:</label>
                    <label>od:</label> <input type="number" id="hourFrom" value="4" min="0" max="23" class="hour-input">
                    <label>do:</label> <input type="number" id="hourTo" value="19" min="0" max="23" class="hour-input">
                </div>
            </div>

            <!-- Sekcja 2: Kryteria wyszukiwania -->
            <div class="panel" style="border-top: 2px solid #ccc;">
                <div class="panel-header">Kryteria wyszukiwania</div>
                
                <div class="search-grid">
                    <!-- Specjalno -->
                    <div class="search-item">
                        <label>Specjalno:</label>
                        <select id="specialtySelect" class="form-control">
                            <option value="">-- Wybierz --</option>
                        </select>
                    </div>

                    <!-- Lekarze Multi-Select -->
                    <div class="search-item">
                        <label>Lekarze:</label>
                        <div class="custom-select-container">
                            <button class="custom-select-trigger" id="doctorsTrigger" onclick="toggleDropdown('doctorsDropdown')">
                                Wybierz...
                            </button>
                            <div class="custom-dropdown" id="doctorsDropdown">
                                <div class="dropdown-search">
                                    <input type="text" placeholder="Szukaj..." onkeyup="filterDropdown(this, 'doctorsList')">
                                </div>
                                <div class="dropdown-list" id="doctorsList"></div>
                                <div class="dropdown-footer">
                                    <button class="btn btn-sm btn-link" onclick="clearSelection('doctorsList')">Wyczy</button>
                                    <button class="btn btn-sm btn-primary" onclick="toggleDropdown('doctorsDropdown')">Zamknij</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Plac贸wki Multi-Select -->
                    <div class="search-item">
                        <label>Plac贸wki:</label>
                        <div class="custom-select-container">
                            <button class="custom-select-trigger" id="clinicsTrigger" onclick="toggleDropdown('clinicsDropdown')">
                                Wybierz...
                            </button>
                            <div class="custom-dropdown" id="clinicsDropdown">
                                <div class="dropdown-search">
                                    <input type="text" placeholder="Szukaj..." onkeyup="filterDropdown(this, 'clinicsList')">
                                </div>
                                <div class="dropdown-list" id="clinicsList"></div>
                                <div class="dropdown-footer">
                                    <button class="btn btn-sm btn-link" onclick="clearSelection('clinicsList')">Wyczy</button>
                                    <button class="btn btn-sm btn-primary" onclick="toggleDropdown('clinicsDropdown')">Zamknij</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="search-grid" style="margin-top: 10px;">
                    <!-- Daty -->
                    <div class="search-item" style="flex: 0 0 auto;">
                        <label>Data od:</label>
                        <input type="date" id="dateFrom" class="form-control date-input">
                    </div>
                    <div class="search-item" style="flex: 0 0 auto;">
                        <label>Data do:</label>
                        <input type="date" id="dateTo" class="form-control date-input">
                    </div>

                    <!-- Przyciski -->
                    <div class="search-actions">
                        <button id="searchBtn" class="btn btn-primary btn-wide">Wyszukaj</button>
                        <button id="resetBtn" class="btn btn-secondary">Wyczy filtry</button>
                    </div>
                </div>
            </div>

            <!-- Sekcja 3: Akcje na wynikach -->
            <div class="actions-bar">
                <button id="bookSelectedBtn" class="btn btn-success" disabled>Zarezerwuj wybran</button>
                <button id="exportBtn" class="btn btn-info">Eksportuj do pliku</button>
            </div>

            <!-- Sekcja 4: Tabela wynik贸w -->
            <div class="results-table-container">
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Godzina</th>
                            <th>Lekarz</th>
                            <th>Specjalno</th>
                            <th>Plac贸wka</th>
                        </tr>
                    </thead>
                    <tbody id="resultsBody"></tbody>
                </table>
            </div>

            <!-- Modal Profile -->
            <div id="profilesModal" class="modal hidden">
                <div class="modal-content">
                    <h3>Wybierz Profil</h3>
                    <div id="profilesList" class="profiles-list"></div>
                    <hr>
                    <h4>Dodaj Profil</h4>
                    <form id="addProfileForm">
                        <input type="text" id="newProfileName" placeholder="Nazwa" required>
                        <input type="text" id="newProfileLogin" placeholder="Login" required>
                        <input type="password" id="newProfilePass" placeholder="Haso" required>
                        <button type="submit" class="btn btn-success">Dodaj</button>
                    </form>
                    <button class="btn btn-secondary close-modal" onclick="toggleProfilesModal()">Zamknij</button>
                </div>
            </div>
            
            <!-- Toast Notifications -->
            <div id="toast" class="toast"></div>
        </div>
    </div>

    <!-- U偶ycie cie偶ki bezwzgldnej -->
    <script src="/script.js"></script>
</body>
</html>